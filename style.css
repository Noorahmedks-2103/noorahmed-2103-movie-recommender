const movieGrid = document.getElementById("movie-grid");
const movieInput = document.getElementById("movie-input");
const suggestions = document.getElementById("suggestions");
const toggleBtn = document.getElementById("toggleTheme");

// Display all movies initially
function displayMovies(filteredMovies) {
    movieGrid.innerHTML = "";
    filteredMovies.forEach(movie => {
        const card = document.createElement("li");
        card.className = "movie-card";
        card.innerHTML = `
            <img src="${movie.poster}" alt="${movie.title}">
            <div class="movie-info">
                <h3>${movie.title}</h3>
                <p class="rating">‚≠ê ${movie.rating}</p>
                <p>${movie.review}</p>
            </div>
        `;
        movieGrid.appendChild(card);
    });
}

// Initial display
displayMovies(movies);

// Search autocomplete
movieInput.addEventListener("input", () => {
    const query = movieInput.value.toLowerCase();
    const matched = movies.filter(m => m.title.toLowerCase().includes(query));
    suggestions.innerHTML = "";
    if(query && matched.length){
        suggestions.style.display = "block";
        matched.forEach(m => {
            const li = document.createElement("li");
            li.textContent = m.title;
            li.addEventListener("click", () => {
                movieInput.value = m.title;
                suggestions.style.display = "none";
                displayMovies([m]); // show selected movie
            });
            suggestions.appendChild(li);
        });
    } else {
        suggestions.style.display = "none";
        displayMovies(movies);
    }
});

// Dark/Light toggle
toggleBtn.addEventListener("click", () => {
    document.body.classList.toggle("light");
});
